<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NFT Deluxe Case</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #00d2ff;
            --accent: #9d50bb;
            --bg: #050505;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            background: radial-gradient(circle at center, #1a1a2e 0%, #050505 100%);
            color: white; font-family: 'Segoe UI', sans-serif;
            margin: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden;
        }

        /* –®–∞–ø–∫–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ */
        .top-bar {
            width: 90%; display: flex; justify-content: space-between; align-items: center; margin-top: 20px;
        }

        .balance-box { background: var(--glass); padding: 10px 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); font-weight: bold; color: #00ff88; }

        .inv-btn { background: var(--glass); border: 1px solid var(--primary); color: white; padding: 10px; border-radius: 12px; font-size: 1.2rem; cursor: pointer; }

        /* –°—Ü–µ–Ω–∞ —Å –∫–µ–π—Å–æ–º */
        .case-scene {
            position: relative; margin-top: 60px; width: 260px; height: 260px;
            display: flex; align-items: center; justify-content: center;
        }

        .case-glow {
            position: absolute; width: 100%; height: 100%;
            background: var(--primary); filter: blur(60px); opacity: 0.3; border-radius: 50%;
        }

        .case-img {
            width: 220px; z-index: 2; transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .spinning { animation: shake 0.5s infinite ease-in-out; }
        @keyframes shake { 0% { transform: rotate(0); } 25% { transform: rotate(5deg); } 75% { transform: rotate(-5deg); } 100% { transform: rotate(0); } }

        /* –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è */
        .open-btn {
            margin-top: 50px; background: linear-gradient(90deg, var(--primary), var(--accent));
            border: none; padding: 18px 60px; border-radius: 20px;
            color: white; font-weight: bold; font-size: 1.2rem; box-shadow: 0 10px 25px rgba(0, 210, 255, 0.4);
        }

        /* –û–∫–Ω–æ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—è */
        #inventory-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(15px);
            display: none; flex-direction: column; align-items: center; z-index: 100;
        }

        .inv-content { width: 90%; margin-top: 50px; text-align: center; }
        .inv-list { 
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; 
            max-height: 60vh; overflow-y: auto; margin-top: 20px; padding: 10px;
        }
        .inv-item { background: var(--glass); padding: 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); font-size: 0.9rem; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="balance-box">üí∞ <span id="coins">1000</span></div>
        <button class="inv-btn" onclick="toggleInventory()">üéí</button>
    </div>

    <div class="case-scene">
        <div class="case-glow" id="glow"></div>
        <img src="https://cdn-icons-png.flaticon.com/512/6161/6161301.png" id="main-img" class="case-img">
    </div>

    <h2 id="status" style="margin-top: 30px; text-transform: uppercase; letter-spacing: 2px;">NFT CASE #1</h2>

    <button class="open-btn" id="roll-btn" onclick="openCase()">–û–¢–ö–†–´–¢–¨</button>
    <p style="color: #666; margin-top: 15px;">–¶–µ–Ω–∞: 50 –º–æ–Ω–µ—Ç</p>

    <div id="inventory-modal">
        <div class="inv-content">
            <h1>üéí –¢–≤–æ–π –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h1>
            <div class="inv-list" id="inv-list">
                </div>
            <button class="open-btn" onclick="toggleInventory()" style="background: #444; margin-top: 30px;">–ù–ê–ó–ê–î</button>
            <button class="open-btn" onclick="saveToBot()" style="background: #28a745;">üíæ –°–û–•–†–ê–ù–ò–¢–¨ –í –ë–û–¢–ê</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let coins = 1000;
        let myItems = [];

        const items = [
            { name: "Common Card", img: "https://cdn-icons-png.flaticon.com/512/9306/9306630.png", color: "#00d2ff" },
            { name: "Rare Cyber NFT", img: "https://cdn-icons-png.flaticon.com/512/9306/9306622.png", color: "#9d50bb" },
            { name: "Legendary Ape", img: "https://cdn-icons-png.flaticon.com/512/9306/9306614.png", color: "#ffcc00" }
        ];

        function openCase() {
            if (coins < 50) {
                tg.showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
                return;
            }

            coins -= 50;
            document.getElementById('coins').innerText = coins;
            
            const btn = document.getElementById('roll-btn');
            const img = document.getElementById('main-img');
            const status = document.getElementById('status');
            const glow = document.getElementById('glow');

            btn.disabled = true;
            img.classList.add('spinning');
            status.innerText = "–û—Ç–∫—Ä—ã–≤–∞–µ–º...";
            tg.HapticFeedback.impactOccurred('medium');

            setTimeout(() => {
                img.classList.remove('spinning');
                const win = items[Math.floor(Math.random() * items.length)];
                
                img.src = win.img; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–ø–∞–≤—à—É—é NFT
                status.innerText = win.name;
                status.style.color = win.color;
                glow.style.background = win.color;
                glow.style.opacity = "0.7";

                myItems.push(win.name);
                updateInventoryUI();
                
                btn.disabled = false;
                tg.HapticFeedback.notificationOccurred('success');

                // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –∫–µ–π—Å–∞
                setTimeout(() => {
                    img.src = "https://cdn-icons-png.flaticon.com/512/6161/6161301.png";
                    status.innerText = "NFT CASE #1";
                    status.style.color = "white";
                    glow.style.background = "var(--primary)";
                    glow.style.opacity = "0.3";
                }, 3000);

            }, 2000);
        }

        function toggleInventory() {
            const modal = document.getElementById('inventory-modal');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
            tg.HapticFeedback.impactOccurred('light');
        }

        function updateInventoryUI() {
            const list = document.getElementById('inv-list');
            list.innerHTML = "";
            myItems.forEach(item => {
                const div = document.createElement('div');
                div.className = "inv-item";
                div.innerText = item;
                list.appendChild(div);
            });
        }

        function saveToBot() {
            if (myItems.length === 0) {
                tg.showAlert("–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç!");
                return;
            }
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ –±–æ—Ç—É
            tg.sendData("–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: " + myItems.join(", "));
        }
    </script>
</body>
</html>
