<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NFT Deluxe Case v1.2</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary: #00d2ff;
            --accent: #9d50bb;
            --bg: #050505;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            background: radial-gradient(circle at center, #1a1a2e 0%, #050505 100%);
            color: white; font-family: 'Segoe UI', sans-serif;
            margin: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden;
        }

        .top-bar { width: 90%; display: flex; justify-content: space-between; align-items: center; margin-top: 20px; }
        .balance-box { background: var(--glass); padding: 10px 15px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.1); font-weight: bold; color: #00ff88; }
        .inv-btn { background: var(--glass); border: 1px solid var(--primary); color: white; padding: 10px; border-radius: 12px; font-size: 1.2rem; cursor: pointer; }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–æ–≤–æ—Å—Ç–µ–π */
        #update-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(15px);
            display: flex; align-items: center; justify-content: center; z-index: 200;
        }
        .modal-content {
            background: linear-gradient(135deg, #1e2a3a, #000);
            padding: 25px; border-radius: 20px; border: 1px solid var(--primary);
            width: 85%; text-align: center;
        }

        /* –ö–µ–π—Å */
        .case-scene { position: relative; margin-top: 60px; width: 260px; height: 260px; display: flex; align-items: center; justify-content: center; }
        .case-glow { position: absolute; width: 100%; height: 100%; background: var(--primary); filter: blur(60px); opacity: 0.3; border-radius: 50%; }
        .case-img { width: 220px; z-index: 2; transition: transform 0.3s; }
        .spinning { animation: shake 0.5s infinite ease-in-out; }
        @keyframes shake { 0% { transform: rotate(0); } 25% { transform: rotate(5deg); } 75% { transform: rotate(-5deg); } 100% { transform: rotate(0); } }

        /* –ö–Ω–æ–ø–∫–∏ */
        .open-btn {
            margin-top: 50px; background: linear-gradient(90deg, var(--primary), var(--accent));
            border: none; padding: 18px 60px; border-radius: 20px;
            color: white; font-weight: bold; font-size: 1.2rem; box-shadow: 0 10px 25px rgba(0, 210, 255, 0.4);
        }

        /* –û–∫–Ω–æ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—è */
        #inventory-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(15px);
            display: none; flex-direction: column; align-items: center; z-index: 100;
        }
        .inv-list { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 90%; margin-top: 20px; }
        .inv-item { background: var(--glass); padding: 10px; border-radius: 10px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body>

    <div id="update-modal">
        <div class="modal-content">
            <h2 style="color: var(--primary);">üöÄ –û–ë–ù–û–í–õ–ï–ù–ò–ï 1.2</h2>
            <div style="text-align: left; font-size: 0.9rem; color: #ccc;">
                <p>üì¶ <b>–ù–æ–≤—ã–π –¥–∏–∑–∞–π–Ω:</b> –†—É–∫–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ 3D-–∫–µ–π—Å.</p>
                <p>‚ö° <b>–ê–≤—Ç–æ-—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:</b> –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" —É–¥–∞–ª–µ–Ω–∞, —Ç–µ–ø–µ—Ä—å –¥–∞–Ω–Ω—ã–µ —É–ª–µ—Ç–∞—é—Ç –±–æ—Ç—É –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.</p>
                <p>üéí <b>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å:</b> –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤.</p>
            </div>
            <button class="open-btn" onclick="closeModal()" style="margin-top: 20px;">–ü–û–ù–Ø–¢–ù–û</button>
        </div>
    </div>

    <div class="top-bar">
        <div class="balance-box">üí∞ <span id="coins">1000</span></div>
        <button class="inv-btn" onclick="toggleInventory()">üéí</button>
    </div>

    <div class="case-scene">
        <div class="case-glow" id="glow"></div>
        <img src="https://cdn-icons-png.flaticon.com/512/6161/6161301.png" id="main-img" class="case-img">
    </div>

    <h2 id="status" style="margin-top: 30px; letter-spacing: 2px;">READY TO ROLL</h2>
    <button class="open-btn" id="roll-btn" onclick="openCase()">–û–¢–ö–†–´–¢–¨ –ö–ï–ô–°</button>

    <div id="inventory-modal">
        <h1 style="margin-top: 60px;">üéí –ò–ù–í–ï–ù–¢–ê–†–¨</h1>
        <div class="inv-list" id="inv-list"></div>
        <button class="open-btn" onclick="toggleInventory()" style="background: #444; margin-top: 40px;">–ó–ê–ö–†–´–¢–¨</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let coins = 1000;
        let myItems = [];

        const items = [
            { name: "Common Card", img: "https://cdn-icons-png.flaticon.com/512/9306/9306630.png", color: "#00d2ff" },
            { name: "Rare Cyber NFT", img: "https://cdn-icons-png.flaticon.com/512/9306/9306622.png", color: "#9d50bb" },
            { name: "Legendary Ape", img: "https://cdn-icons-png.flaticon.com/512/9306/9306614.png", color: "#ffcc00" }
        ];

        function closeModal() { document.getElementById('update-modal').style.display = 'none'; }
        function toggleInventory() { 
            const m = document.getElementById('inventory-modal');
            m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
        }

        function openCase() {
            if (coins < 50) { tg.showAlert("–ú–∞–ª–æ –º–æ–Ω–µ—Ç!"); return; }
            coins -= 50;
            document.getElementById('coins').innerText = coins;
            
            const btn = document.getElementById('roll-btn');
            const img = document.getElementById('main-img');
            const status = document.getElementById('status');

            btn.disabled = true;
            img.classList.add('spinning');
            status.innerText = "–û–¢–ö–†–´–í–ê–ï–ú...";

            setTimeout(() => {
                img.classList.remove('spinning');
                const win = items[Math.floor(Math.random() * items.length)];
                
                img.src = win.img;
                status.innerText = win.name;
                status.style.color = win.color;

                myItems.push(win.name);
                renderInv();

                // –ê–í–¢–û-–û–¢–ü–†–ê–í–ö–ê –ë–û–¢–£
                tg.sendData(win.name); 

                btn.disabled = false;
                tg.HapticFeedback.notificationOccurred('success');

                setTimeout(() => {
                    img.src = "https://cdn-icons-png.flaticon.com/512/6161/6161301.png";
                    status.innerText = "READY TO ROLL";
                    status.style.color = "white";
                }, 3000);
            }, 2000);
        }

        function renderInv() {
            const list = document.getElementById('inv-list');
            list.innerHTML = "";
            myItems.forEach(i => {
                const d = document.createElement('div');
                d.className = "inv-item";
                d.innerText = i;
                list.appendChild(d);
            });
        }
    </script>
</body>
</html>
